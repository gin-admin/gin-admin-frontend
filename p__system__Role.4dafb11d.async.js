(self.webpackChunkgin_admin_frontend=self.webpackChunkgin_admin_frontend||[]).push([[905],{31199:function(k,R,e){"use strict";var s=e(22122),u=e(28991),o=e(81253),l=e(67294),d=e(46855),T=["fieldProps","min","proFieldProps","max"],O=function(v,y){var P=v.fieldProps,c=v.min,S=v.proFieldProps,M=v.max,a=(0,o.Z)(v,T);return l.createElement(d.Z,(0,s.Z)({mode:"edit",valueType:"digit",fieldProps:(0,u.Z)({min:c,max:M},P),ref:y,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:S},a))};R.Z=l.forwardRef(O)},52688:function(k,R,e){"use strict";var s=e(22122),u=e(28991),o=e(81253),l=e(67294),d=e(46855),T=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],O=l.forwardRef(function(h,v){var y=h.fieldProps,P=h.unCheckedChildren,c=h.checkedChildren,S=h.proFieldProps,M=(0,o.Z)(h,T);return l.createElement(d.Z,(0,s.Z)({valueType:"switch",mode:"edit",fieldProps:(0,u.Z)({unCheckedChildren:P,checkedChildren:c},y),ref:v,valuePropName:"checked",proFieldProps:S,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},M))});R.Z=O},5966:function(k,R,e){"use strict";var s=e(22122),u=e(81253),o=e(67294),l=e(46855),d=["fieldProps","proFieldProps"],T=["fieldProps","proFieldProps"],O="text",h=function(c){var S=c.fieldProps,M=c.proFieldProps,a=(0,u.Z)(c,d);return o.createElement(l.Z,(0,s.Z)({mode:"edit",valueType:O,fieldProps:S,filedConfig:{valueType:O},proFieldProps:M},a))},v=function(c){var S=c.fieldProps,M=c.proFieldProps,a=(0,u.Z)(c,T);return o.createElement(l.Z,(0,s.Z)({mode:"edit",valueType:"password",fieldProps:S,proFieldProps:M,filedConfig:{valueType:O}},a))},y=h;y.Password=v,y.displayName="ProFormComponent",R.Z=y},90672:function(k,R,e){"use strict";var s=e(22122),u=e(81253),o=e(67294),l=e(46855),d=["fieldProps","proFieldProps"],T=function(h,v){var y=h.fieldProps,P=h.proFieldProps,c=(0,u.Z)(h,d);return o.createElement(l.Z,(0,s.Z)({ref:v,mode:"edit",valueType:"textarea",fieldProps:y,proFieldProps:P},c))};R.Z=o.forwardRef(T)},55243:function(k,R,e){"use strict";e.d(R,{HS:function(){return Q},IG:function(){return J},hC:function(){return X},g2:function(){return _}});var s=e(62350),u=e(24565),o=e(22385),l=e(45777),d=e(11849),T=e(57663),O=e(71577),h=e(28991),v=e(67294),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},P=y,c=e(27029),S=function(i,b){return v.createElement(c.Z,(0,h.Z)((0,h.Z)({},i),{},{ref:b,icon:P}))};S.displayName="PlusCircleOutlined";var M=v.forwardRef(S),a=e(49101),n=e(1870),m=e(73171),F=e(8212),t=e(25377),B=e(51615),E=e(85893),Q=function(i){var b=(0,t.tT)("@@initialState"),f=b.initialState,A=(0,t.YB)(),W=(0,B.$B)(),C=f.routePathCodeMap[W.path],r=f.flatMenus.hasOwnProperty("".concat(C,".add"));return(0,E.jsx)(E.Fragment,{children:r&&(0,E.jsx)(O.Z,(0,d.Z)((0,d.Z)({icon:(0,E.jsx)(a.Z,{}),type:"primary"},i),{},{title:void 0,children:i.title?i.title:A.formatMessage({id:"button.add"})}))})},J=function(i){var b=(0,t.tT)("@@initialState"),f=b.initialState,A=(0,t.YB)(),W=(0,B.$B)(),C=f.routePathCodeMap[W.path],r=f.flatMenus.hasOwnProperty("".concat(C,".add"));return(0,E.jsx)(E.Fragment,{children:r&&(0,E.jsx)(l.Z,{title:i.title?i.title:A.formatMessage({id:"button.add",defaultMessage:"\u6DFB\u52A0"}),children:(0,E.jsx)(O.Z,(0,d.Z)((0,d.Z)({size:"middle",shape:"circle",type:"link",icon:(0,E.jsx)(M,{}),style:{border:0}},i),{},{title:void 0}))})})},X=function(i){var b,f=(0,t.tT)("@@initialState"),A=f.initialState,W=(0,B.$B)(),C=(0,t.YB)(),r=A.routePathCodeMap[W.path],g=A.flatMenus.hasOwnProperty("".concat(r,".delete"));return(0,E.jsx)(E.Fragment,{children:g&&(0,v.createElement)(u.Z,(0,d.Z)((0,d.Z)({},i),{},{key:"delete",title:i.title,icon:(0,E.jsx)(n.Z,{style:{color:"red"}}),placement:"topLeft",onCancel:function(N){return N.stopPropagation()}}),(0,E.jsx)(l.Z,{title:(b=i.buttonProps)!==null&&b!==void 0&&b.title?i.buttonProps.title:C.formatMessage({id:"button.delete",defaultMessage:"\u5220\u9664"}),children:(0,E.jsx)(O.Z,(0,d.Z)((0,d.Z)({size:"middle",shape:"circle",danger:!0,icon:(0,E.jsx)(m.Z,{}),style:{border:0},onClick:function(N){return N.stopPropagation()}},i.buttonProps),{},{title:void 0}))}))})},_=function(i){var b=(0,t.tT)("@@initialState"),f=b.initialState,A=(0,t.YB)(),W=(0,B.$B)(),C=f.routePathCodeMap[W.path],r=f.flatMenus.hasOwnProperty("".concat(C,".edit"));return(0,E.jsx)(E.Fragment,{children:r&&(0,E.jsx)(l.Z,{title:i.title?i.title:A.formatMessage({id:"button.edit",defaultMessage:"\u7F16\u8F91"}),children:(0,E.jsx)(O.Z,(0,d.Z)((0,d.Z)({size:"middle",shape:"circle",type:"link",icon:i.icon?i.icon:(0,E.jsx)(F.Z,{}),style:{border:0}},i),{},{title:void 0}))})})},ee=function(i){var b=useModel("@@initialState"),f=b.initialState,A=useIntl(),W=useRouteMatch(),C=f.routePathCodeMap[W.path],r=f.flatMenus.hasOwnProperty("".concat(C,".export"));return _jsx(_Fragment,{children:r&&_jsx(_Button,_objectSpread(_objectSpread({icon:_jsx(UploadOutlined,{}),type:"primary"},i),{},{title:void 0,children:i.title?i.title:A.formatMessage({id:"button.export",defaultMessage:"\u5BFC\u51FA"})}))})},te=function(i){var b=useModel("@@initialState"),f=b.initialState,A=useIntl(),W=useRouteMatch(),C=f.routePathCodeMap[W.path],r=f.flatMenus.hasOwnProperty("".concat(C,".import"));return _jsx(_Fragment,{children:r&&_jsx(_Button,_objectSpread(_objectSpread({icon:_jsx(ImportOutlined,{}),type:"primary"},i),{},{title:void 0,children:i.title?i.title:A.formatMessage({id:"button.import",defaultMessage:"\u5BFC\u5165"})}))})}},75777:function(k,R,e){"use strict";e.r(R),e.d(R,{default:function(){return W}});var s=e(49111),u=e(19650),o=e(39428),l=e(34792),d=e(48086),T=e(3182),O=e(71153),h=e(60331),v=e(2824),y=e(67265),P=e(67294),c=e(25377),S=e(48265),M=e(45562),a=e(37476),n=e(5894),m=e(5966),F=e(90672),t=e(31199),B=e(52688),E=e(32157),Q=e(82363),J=e(63468),X=e(93606),_=e(85893),ee=function(r){var g=(0,P.useState)([]),$=(0,v.Z)(g,2),N=$[0],V=$[1],w=(0,P.useState)([]),H=(0,v.Z)(w,2),K=H[0],L=H[1],I=(0,P.useState)([]),j=(0,v.Z)(I,2),x=j[0],Z=j[1];(0,P.useEffect)(function(){(0,J.Zy)({status:"enabled"}).then(function(U){U.data&&(V((0,X.convertTreeData)(U.data)),Z(U.data.map(function(Y){return Y.id})))})},[]),(0,P.useEffect)(function(){r.value?L(r.value.map(function(U){return U.menu_id})):L([])},[r.value]);var z=function U(Y){return Y.map(function(D){return(0,_.jsx)(Q.Z.TreeNode,{selectable:!1,isLeaf:!(D.children&&D.children.length>0),title:D.title,children:D.children&&U(D.children)},D.key)})},p=function(Y){var D=[];Array.isArray(Y)?D=Y:D=Y.checked,L(D.map(function(q){return q.toString()})),r.onChange&&r.onChange(D.map(function(q){return{menu_id:q.toString()}}))};return(0,_.jsx)("div",{style:{width:"100%",maxHeight:280,overflowY:"scroll",border:"1px solid #f0f0f0",padding:"15px 30px"},children:(0,_.jsx)(Q.Z,{checkable:!0,selectable:!1,checkedKeys:K,expandedKeys:x,onExpand:function(Y){return Z(Y.map(function(D){return D.toString()}))},onCheck:p,children:z(N)})})},te=ee,G=function(r){var g=(0,c.YB)(),$=(0,P.useRef)(),N=P.useState(),V=(0,v.Z)(N,2),w=V[0],H=V[1];return(0,P.useEffect)(function(){var K;!r.visible||((K=$.current)===null||K===void 0||K.resetFields(),r.id&&(0,M.cY)(r.id).then(function(){var L=(0,T.Z)((0,o.Z)().mark(function I(j){var x,Z;return(0,o.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:j.data&&(Z=j.data,H(Z),Z.statusChecked=Z.status==="enabled",(x=$.current)===null||x===void 0||x.setFieldsValue(Z));case 1:case"end":return p.stop()}},I)}));return function(I){return L.apply(this,arguments)}}()))},[r]),(0,_.jsxs)(a.Y,{visible:r.visible,title:r.title,width:650,formRef:$,layout:"horizontal",grid:!0,submitTimeout:3e3,submitter:{searchConfig:{submitText:g.formatMessage({id:"button.confirm"}),resetText:g.formatMessage({id:"button.cancel"})}},modalProps:{destroyOnClose:!0,maskClosable:!1,onCancel:function(){r.onCancel()}},onFinish:function(){var K=(0,T.Z)((0,o.Z)().mark(function L(I){var j,x,Z;return(0,o.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(I.status=I.statusChecked?"enabled":"disabled",delete I.statusChecked,!(!I.menus||I.menus.length===0)){p.next=5;break}return d.ZP.warning(g.formatMessage({id:"pages.system.role.form.menu.required"})),p.abrupt("return",!1);case 5:if(!r.id){p.next=26;break}if(!(w!=null&&w.menus)){p.next=22;break}j=I.menus,x=0;case 9:if(!(x<j.length)){p.next=21;break}Z=0;case 11:if(!(Z<w.menus.length)){p.next=18;break}if(j[x].menu_id!==w.menus[Z].menu_id){p.next=15;break}return j[x].id=w.menus[Z].id,p.abrupt("break",18);case 15:Z++,p.next=11;break;case 18:x++,p.next=9;break;case 21:I.menus=j;case 22:return p.next=24,(0,M.ul)(r.id,I);case 24:p.next=28;break;case 26:return p.next=28,(0,M._d)(I);case 28:return d.ZP.success(g.formatMessage({id:"component.message.success.save"})),r.onSuccess(),p.abrupt("return",!0);case 31:case"end":return p.stop()}},L)}));return function(L){return K.apply(this,arguments)}}(),initialValues:{sequence:0,statusChecked:!0},children:[(0,_.jsxs)(n.A.Group,{title:g.formatMessage({id:"pages.system.role.form.basic"}),rowProps:{gutter:20},children:[(0,_.jsx)(m.Z,{name:"name",label:g.formatMessage({id:"pages.system.role.form.name"}),placeholder:g.formatMessage({id:"pages.system.role.form.name.placeholder"}),rules:[{required:!0,message:g.formatMessage({id:"pages.system.role.form.name.required"})}],colProps:{span:12}}),(0,_.jsx)(m.Z,{name:"code",label:g.formatMessage({id:"pages.system.role.form.code"}),placeholder:g.formatMessage({id:"pages.system.role.form.code.placeholder"}),rules:[{required:!0,message:g.formatMessage({id:"pages.system.role.form.code.required"})}],colProps:{span:12}}),(0,_.jsx)(F.Z,{name:"description",label:g.formatMessage({id:"pages.system.menu.form.description"}),fieldProps:{rows:1},colProps:{span:24}}),(0,_.jsx)(t.Z,{name:"sequence",label:g.formatMessage({id:"pages.system.role.form.sequence"}),colProps:{span:12},wrapperCol:{span:12}}),(0,_.jsx)(B.Z,{name:"statusChecked",label:g.formatMessage({id:"pages.system.role.form.status"}),fieldProps:{checkedChildren:g.formatMessage({id:"pages.system.role.form.status.enabled"}),unCheckedChildren:g.formatMessage({id:"pages.system.role.form.status.disabled"})},colProps:{span:12}})]}),(0,_.jsx)(n.A.Group,{title:g.formatMessage({id:"pages.system.role.form.menu"}),children:(0,_.jsx)(n.A.Item,{name:"menus",noStyle:!0,children:(0,_.jsx)(te,{})})})]})},i=G,b=e(55243),f;(function(C){C[C.ADD=0]="ADD",C[C.EDIT=1]="EDIT",C[C.CANCEL=2]="CANCEL"})(f||(f={}));var A=function(){var r=(0,c.YB)(),g=(0,P.useRef)(),$=r.formatMessage({id:"pages.system.role.add"}),N=r.formatMessage({id:"pages.system.role.edit"}),V=r.formatMessage({id:"pages.system.role.delTip"}),w=(0,P.useReducer)(function(j,x){var Z;switch(x.type){case f.ADD:return{visible:!0,title:$};case f.EDIT:return{visible:!0,title:N,id:(Z=x.payload)===null||Z===void 0?void 0:Z.id};case f.CANCEL:return{visible:!1,title:"",id:void 0};default:return j}},{visible:!1,title:""}),H=(0,v.Z)(w,2),K=H[0],L=H[1],I=[{title:r.formatMessage({id:"pages.system.role.form.name"}),dataIndex:"name",ellipsis:!0,width:160,key:"name"},{title:r.formatMessage({id:"pages.system.role.form.code"}),dataIndex:"code",width:160,key:"code"},{title:r.formatMessage({id:"pages.system.role.form.sequence"}),dataIndex:"sequence",width:120,search:!1},{title:r.formatMessage({id:"pages.system.role.form.status"}),dataIndex:"status",width:130,search:!1,render:function(x,Z){var z=Z.status;return(0,_.jsx)(h.Z,{color:z==="enabled"?"success":"error",children:z==="enabled"?r.formatMessage({id:"pages.system.role.form.status.enabled"}):r.formatMessage({id:"pages.system.role.form.status.disabled"})})}},{title:r.formatMessage({id:"pages.system.role.form.created_at"}),dataIndex:"created_at",valueType:"dateTime",search:!1,width:180},{title:r.formatMessage({id:"pages.system.role.form.updated_at"}),dataIndex:"updated_at",valueType:"dateTime",search:!1,width:180},{title:r.formatMessage({id:"pages.table.column.operation"}),valueType:"option",key:"option",width:130,render:function(x,Z){return(0,_.jsxs)(u.Z,{size:2,children:[(0,_.jsx)(b.g2,{onClick:function(){L({type:f.EDIT,payload:Z})}},"edit"),(0,_.jsx)(b.hC,{title:V,onConfirm:(0,T.Z)((0,o.Z)().mark(function z(){var p,U;return(0,o.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,M.k8)(Z.id);case 2:p=D.sent,p.success&&(d.ZP.success(r.formatMessage({id:"component.message.success.delete"})),(U=g.current)===null||U===void 0||U.reload());case 4:case"end":return D.stop()}},z)}))},"delete")]})}}];return(0,_.jsxs)(y.ZP,{children:[(0,_.jsx)(S.Z,{columns:I,actionRef:g,request:M.fp,rowKey:"id",cardBordered:!0,search:{labelWidth:"auto"},pagination:{pageSize:10,showSizeChanger:!0},options:{density:!0,fullScreen:!0,reload:!0},dateFormatter:"string",toolBarRender:function(){return[(0,_.jsx)(b.HS,{onClick:function(){L({type:f.ADD})}},"add")]}}),(0,_.jsx)(i,{visible:K.visible,title:K.title,id:K.id,onCancel:function(){L({type:f.CANCEL})},onSuccess:function(){var x;L({type:f.CANCEL}),(x=g.current)===null||x===void 0||x.reload()}})]})},W=A},63468:function(k,R,e){"use strict";e.d(R,{Zy:function(){return d},bL:function(){return O},r7:function(){return v},_8:function(){return P},yo:function(){return S}});var s=e(39428),u=e(11849),o=e(3182),l=e(25377);function d(a,n){return T.apply(this,arguments)}function T(){return T=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/menus",(0,u.Z)({method:"GET",params:(0,u.Z)({},n)},m||{})));case 1:case"end":return t.stop()}},a)})),T.apply(this,arguments)}function O(a,n){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/menus",(0,u.Z)({method:"POST",data:n},m||{})));case 1:case"end":return t.stop()}},a)})),h.apply(this,arguments)}function v(a,n){return y.apply(this,arguments)}function y(){return y=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/menus/".concat(n),(0,u.Z)({method:"GET"},m||{})));case 1:case"end":return t.stop()}},a)})),y.apply(this,arguments)}function P(a,n,m){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,s.Z)().mark(function a(n,m,F){return(0,s.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,l.WY)("/api/v1/menus/".concat(n),(0,u.Z)({method:"PUT",data:m},F||{})));case 1:case"end":return B.stop()}},a)})),c.apply(this,arguments)}function S(a,n){return M.apply(this,arguments)}function M(){return M=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/menus/".concat(n),(0,u.Z)({method:"DELETE"},m||{})));case 1:case"end":return t.stop()}},a)})),M.apply(this,arguments)}},45562:function(k,R,e){"use strict";e.d(R,{fp:function(){return d},_d:function(){return O},cY:function(){return v},ul:function(){return P},k8:function(){return S}});var s=e(39428),u=e(11849),o=e(3182),l=e(25377);function d(a,n){return T.apply(this,arguments)}function T(){return T=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/roles",(0,u.Z)({method:"GET",params:(0,u.Z)({current:"1",pageSize:"10"},n)},m||{})));case 1:case"end":return t.stop()}},a)})),T.apply(this,arguments)}function O(a,n){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/roles",(0,u.Z)({method:"POST",data:n},m||{})));case 1:case"end":return t.stop()}},a)})),h.apply(this,arguments)}function v(a,n){return y.apply(this,arguments)}function y(){return y=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/roles/".concat(n),(0,u.Z)({method:"GET"},m||{})));case 1:case"end":return t.stop()}},a)})),y.apply(this,arguments)}function P(a,n,m){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,s.Z)().mark(function a(n,m,F){return(0,s.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,l.WY)("/api/v1/roles/".concat(n),(0,u.Z)({method:"PUT",data:m},F||{})));case 1:case"end":return B.stop()}},a)})),c.apply(this,arguments)}function S(a,n){return M.apply(this,arguments)}function M(){return M=(0,o.Z)((0,s.Z)().mark(function a(n,m){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/v1/roles/".concat(n),(0,u.Z)({method:"DELETE"},m||{})));case 1:case"end":return t.stop()}},a)})),M.apply(this,arguments)}}}]);
